

import java.io.BufferedWriter;
import java.io.IOException;
import java.io.OutputStream;
import java.io.OutputStreamWriter;
import java.net.Socket;

/**
 * Created by RaphaÃ«l KUMAR on 29/05/17.
 */
public class Sender {

    OutputStream os;

    public Sender(Socket socket) throws IOException {
        os = socket.getOutputStream();
    }

    public void send(String message) throws IOException {
        BufferedWriter bf = new BufferedWriter(new OutputStreamWriter(os));
        String toSend = message;
        byte[] toSendBytes = toSend.getBytes();
        int toSendLen = toSendBytes.length;
        byte[] toSendLenBytes = new byte[4];
        toSendLenBytes[0] = (byte)(toSendLen & 0xff);
        toSendLenBytes[1] = (byte)((toSendLen >> 8) & 0xff);
        toSendLenBytes[2] = (byte)((toSendLen >> 16) & 0xff);
        toSendLenBytes[3] = (byte)((toSendLen >> 24) & 0xff);
        os.write(toSendLenBytes);
        os.write(toSendBytes);
    }
}
